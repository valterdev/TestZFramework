# Взаимодействие с Google API

Для быстрого прототипирования и легкого взаимодействия с геймдизайнерами. В ZFramework поддерживает импорт данных из гугл таблиц.
Так гейдизайнеры могут создавать в специально созданных таблицах вкладки с таблицами в которых может храниться любая информация.
Без необходимости создавать инструментарий для ввода баланса, локалей и прочего. Все работает следующим образом:

Есть таблица к которой открыт доступ приложению. Геймдизайнеры заносят данные в эту таблицу, а программистом остается лишь импортировать эти данные.

Для этих целей в движке присутствует DatabaseUtil в котором описан формат Гугл Таблиц. И для актуализации билда все что остается программисту эту пойти в меню Unity:
Tools -> Database -> Refresh Alll
Либо что-то конкретное.

Так все данные из таблиц будут перенесены в базу данных самой игры.

## Как это работает изнутри?

Необходимо зарегаться в Google Cloud Platform (https://console.developers.google.com)
Далее находим и активируем Google Sheets API: APIs & Services -> Credentials Там создаем API key с доступом к таблицам.
Далее под этим аккаунтом создаем таблицу(ы) откуда будут браться данные. Затем в RefreshExcel (DatabaseUtil.cs) меняем константы:

```c#
const string sheetId = "";
const string key = "";
```

В переменную key вставляем наш АПИ ключ. В переменную sheetId вставляем ID таблицы, которую мы будем парсить и извлекать из нее данные.
ID Таблицы можно найти в строке адреса браузера, то, что идет после https://docs.google.com/spreadsheets/d/ => ЗДЕСЬ <= /edit...

То, каким образом будут заполнены и прочитаны таблицы, необходимо договориться геймдизайнерам и программистам.

Класс Document в DatabaseUtil полностью описывает модель данных гугл таблицы со всеми вкладками.

## Недостатки решения

В таблицах нет проверки на дурака. Поэтому если геймдизайнер ошибется, то таблица не будет нормально распарсена. Для больших проектов, возможно потребуется инструмент, который будет следить, чтобы были выставлены все ID верно и все данных были записаны в нужных местах (консистентность данных)

Но для тех же переводов на несколько языков - данное решение является оптимальным. Как и для простых данных где ошибки минимальны и не столь значительны.